<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seismic Network</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
</head>
<body>
    <!-- Header with wallet connection -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <h1>Seismic Network</h1>
            </div>
            <div class="wallet-controls">
                <button id="connectWallet" class="connect-btn">Connect Wallet</button>
                <div id="walletInfo" class="wallet-info" style="display: none;">
                    <span id="walletAddress" class="wallet-address"></span>
                    <button id="disconnectWallet" class="disconnect-btn">Disconnect</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main content -->
    <main class="main-content">
        <!-- Network Status -->
        <section class="network-status">
            <h2>Network Status</h2>
            <div class="status-grid">
                <div class="status-card">
                    <h3>Validators</h3>
                    <span id="validatorCount" class="status-value">-</span>
                </div>
                <div class="status-card">
                    <h3>Network Health</h3>
                    <span id="networkHealth" class="status-value">-</span>
                </div>
                <div class="status-card">
                    <h3>Current Block</h3>
                    <span id="currentBlock" class="status-value">-</span>
                </div>
                <div class="status-card">
                    <h3>Gas Price</h3>
                    <span id="gasPrice" class="status-value">-</span>
                </div>
            </div>
        </section>

        <!-- Seismic Animation -->
        <section class="seismic-section">
            <h2>Seismic Activity</h2>
            <div id="seismicContainer" class="seismic-container">
                <canvas id="seismicCanvas" width="800" height="400"></canvas>
                <div class="animation-controls">
                    <button id="startAnimation" class="control-btn">Start Monitoring</button>
                    <button id="stopAnimation" class="control-btn">Stop Monitoring</button>
                    <button id="resetAnimation" class="control-btn">Reset</button>
                </div>
                <div class="seismic-info">
                    <div class="info-item">
                        <label>Frequency:</label>
                        <span id="frequency">0.5 Hz</span>
                    </div>
                    <div class="info-item">
                        <label>Amplitude:</label>
                        <span id="amplitude">50</span>
                    </div>
                    <div class="info-item">
                        <label>Node Count:</label>
                        <span id="nodeCount">0</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trading Interface -->
        <section class="trading-section">
            <h2>Seismic Trading</h2>
            <div class="trading-container">
                <div class="balance-info">
                    <div class="balance-item">
                        <label>Balance:</label>
                        <span id="balance">0.00 SEIS</span>
                    </div>
                    <div class="balance-item">
                        <label>Staked:</label>
                        <span id="staked">0.00 SEIS</span>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="stakeBtn" class="action-btn">Stake Tokens</button>
                    <button id="unstakeBtn" class="action-btn">Unstake</button>
                    <button id="claimBtn" class="action-btn">Claim Rewards</button>
                </div>
                
                <div class="transaction-form">
                    <h3>Send Transaction</h3>
                    <input type="text" id="recipientAddress" placeholder="Recipient Address" class="input-field">
                    <input type="number" id="amount" placeholder="Amount (SEIS)" class="input-field" step="0.01">
                    <button id="sendTransaction" class="action-btn">Send Transaction</button>
                </div>
            </div>
        </section>

        <!-- Transaction History -->
        <section class="history-section">
            <h2>Transaction History</h2>
            <div id="transactionHistory" class="transaction-list">
                <!-- Transactions will be populated here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 Seismic Network. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Documentation</a>
                <a href="#">GitHub</a>
                <a href="#">Discord</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <!-- Suppress MetaMask conflicts (but still allow real providers) -->
    <script>
        // Suppress only MetaMask provider conflict errors, keep everything else
        const originalError = console.error;
        console.error = function(...args) {
            if (typeof args[0] === 'string' && 
                args[0].includes('MetaMask encountered an error setting the global Ethereum provider')) {
                return; // Suppress only this specific MetaMask error
            }
            originalError.apply(console, args);
        };
    </script>

    <!-- Load Privy SDK -->
    <script crossorigin src="https://unpkg.com/@privy-io/react-auth@latest/dist/index.js"></script>
    
    <!-- Initialize Privy -->
    <script>
        // Real Privy SDK initialization - NO STUBS OR SIMULATIONS
        window.privySDKPromise = new Promise((resolve, reject) => {
            let attempts = 0;
            const maxAttempts = 100;
            
            const waitForPrivy = () => {
                attempts++;
                
                // Check for real Privy SDK
                if (window.PrivyReactAuth && window.PrivyReactAuth.PrivyProvider) {
                    console.log('✅ Real Privy SDK loaded successfully');
                    window.PrivySDK = window.PrivyReactAuth;
                    resolve(window.PrivyReactAuth);
                    return;
                }
                
                if (attempts >= maxAttempts) {
                    console.error('❌ Failed to load Privy SDK - NO FALLBACKS CREATED');
                    reject(new Error('Privy SDK failed to load'));
                    return;
                }
                
                setTimeout(waitForPrivy, 100);
            };
            
            waitForPrivy();
        });
    </script>

    <!-- Configuration -->
    <script src="seismic-config.js"></script>
    
    <!-- Seismic SDK -->
    <script src="seismic-sdk.js"></script>
    
    <!-- Wallet Connector -->
    <script src="wallet-connector.js"></script>
    
    <!-- Seismic Animation -->
    <script src="seismic-animation.js"></script>
    
    <!-- Main App -->
    <script src="app.js"></script>
</body>
</html> 