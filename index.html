<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seismic Game - Privy React Auth</title>
    <meta name="description" content="–ë–ª–æ–∫—á–µ–π–Ω –∏–≥—Ä–∞ —Å Privy –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåä</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Meta tags for security -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups">
    
    <style>
        /* Critical CSS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        #root {
            min-height: 100vh;
        }
        
        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            text-align: center;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #6A6FF5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 2rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-container h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #6A6FF5;
            margin-bottom: 0.5rem;
        }
        
        .loading-container p {
            font-size: 1rem;
            color: #666;
            max-width: 400px;
        }
        
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.1);
        }
        
        .app-header {
            background: linear-gradient(135deg, #6A6FF5, #4F46E5);
            color: white;
            text-align: center;
            padding: 3rem 2rem;
        }
        
        .app-header h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }
        
        .app-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .app-main {
            flex: 1;
            padding: 3rem 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .auth-section {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .auth-section h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #4F46E5;
            font-weight: 600;
        }
        
        .auth-section p {
            font-size: 1.1rem;
            color: #6b7280;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        
        .connect-button {
            background: linear-gradient(135deg, #6A6FF5, #4F46E5);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(106, 111, 245, 0.3);
        }
        
        .connect-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(106, 111, 245, 0.4);
        }
        
        .user-section {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .user-info {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .user-info h2 {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: #4F46E5;
            font-weight: 600;
            text-align: center;
        }
        
        .user-details {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 12px;
        }
        
        .user-details p {
            margin-bottom: 0.8rem;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .user-details strong {
            color: #4F46E5;
            font-weight: 600;
        }
        
        .user-details code {
            background: #e2e8f0;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            font-family: 'Courier New', monospace;
            word-break: break-all;
        }
        
        .actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .action-button {
            padding: 1rem 1.5rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .game-button {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .wallet-button {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .logout-button {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }
        
        .network-info {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .network-info h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #4F46E5;
            text-align: center;
            font-weight: 600;
        }
        
        .network-details {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 12px;
        }
        
        .app-footer {
            background: #1f2937;
            color: white;
            text-align: center;
            padding: 1.5rem;
        }
        
        .error-message {
            background: #fee;
            border: 1px solid #fcc;
            color: #c00;
            padding: 1rem;
            margin: 1rem;
            border-radius: 8px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .app-container { margin: 0; }
            .app-header { padding: 2rem 1rem; }
            .app-header h1 { font-size: 2.5rem; }
            .app-main { padding: 2rem 1rem; }
            .auth-section { padding: 2rem; }
            .actions { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <noscript>
        <div style="text-align: center; padding: 50px; background: white; color: #333;">
            <h1>üåä Seismic Game</h1>
            <p>–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å JavaScript –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.</p>
        </div>
    </noscript>
    
    <div id="root">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <h2>üåä –ó–∞–≥—Ä—É–∑–∫–∞ Seismic Game</h2>
            <p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å Privy SDK...</p>
        </div>
    </div>

    <!-- React 18 -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel Standalone –¥–ª—è JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Privy React Auth SDK -->
    <script crossorigin src="https://unpkg.com/@privy-io/react-auth@1.69.0/dist/index.umd.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { PrivyProvider, usePrivy } = PrivyReactAuth;

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ç–∏ Seismic
        const seismicNetwork = {
            id: 5124,
            name: 'Seismic devnet',
            network: 'seismic',
            nativeCurrency: {
                decimals: 18,
                name: 'Ether',
                symbol: 'ETH',
            },
            rpcUrls: {
                public: { http: ['https://node-2.seismicdev.net/rpc'] },
                default: { http: ['https://node-2.seismicdev.net/rpc'] },
            },
            blockExplorers: {
                default: { 
                    name: 'Seismic Explorer', 
                    url: 'https://explorer-2.seismicdev.net/' 
                },
            },
        };

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Privy
        const privyConfig = {
            appearance: {
                accentColor: '#6A6FF5',
                theme: 'light',
                showWalletLoginFirst: false,
                logo: 'https://auth.privy.io/logos/privy-logo.png',
            },
            loginMethods: ['wallet', 'email'],
            embeddedWallets: {
                createOnLogin: 'users-without-wallets',
                requireUserPasswordOnCreate: false,
                showWalletUIs: true,
            },
            defaultChain: seismicNetwork,
            supportedChains: [seismicNetwork],
        };

        // –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function AppContent() {
            const { ready, authenticated, user, login, logout } = usePrivy();

            if (!ready) {
                return (
                    <div className="loading-container">
                        <div className="loading-spinner"></div>
                        <h2>üåä –ó–∞–≥—Ä—É–∑–∫–∞ Seismic Game</h2>
                        <p>–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Privy React Auth SDK...</p>
                    </div>
                );
            }

            return (
                <div className="app-container">
                    <header className="app-header">
                        <h1>üåä Seismic Game</h1>
                        <p>–ë–ª–æ–∫—á–µ–π–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Privy React Auth SDK</p>
                    </header>

                    <main className="app-main">
                        {!authenticated ? (
                            <div className="auth-section">
                                <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                                <p>–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∏–≥—Ä—É</p>
                                <button className="connect-button" onClick={login}>
                                    üîê –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫
                                </button>
                            </div>
                        ) : (
                            <div className="user-section">
                                <div className="user-info">
                                    <h2>‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω!</h2>
                                    <div className="user-details">
                                        <p><strong>ID:</strong> {user?.id}</p>
                                        {user?.wallet?.address && (
                                            <p><strong>–ö–æ—à–µ–ª–µ–∫:</strong> <code>{user.wallet.address}</code></p>
                                        )}
                                        {user?.email?.address && (
                                            <p><strong>Email:</strong> {user.email.address}</p>
                                        )}
                                        <p><strong>–°–æ–∑–¥–∞–Ω:</strong> {user?.createdAt ? new Date(user.createdAt).toLocaleString('ru-RU') : 'N/A'}</p>
                                    </div>
                                </div>

                                <div className="actions">
                                    <button 
                                        className="action-button game-button"
                                        onClick={() => alert('üéÆ –ò–≥—Ä–∞ —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞!')}
                                    >
                                        üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É
                                    </button>
                                    
                                    <button 
                                        className="action-button wallet-button"
                                        onClick={() => {
                                            console.log('User:', user);
                                            console.log('User wallets:', user?.linkedAccounts);
                                            alert('üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –∫–æ—à–µ–ª—å–∫–∞—Ö –≤ –∫–æ–Ω—Å–æ–ª–∏');
                                        }}
                                    >
                                        üëõ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ
                                    </button>
                                    
                                    <button 
                                        className="action-button logout-button"
                                        onClick={logout}
                                    >
                                        üö™ –í—ã–π—Ç–∏
                                    </button>
                                </div>

                                <div className="network-info">
                                    <h3>üåê –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ç–∏</h3>
                                    <div className="network-details">
                                        <p><strong>–°–µ—Ç—å:</strong> {seismicNetwork.name}</p>
                                        <p><strong>Chain ID:</strong> <code>{seismicNetwork.id}</code></p>
                                        <p><strong>RPC:</strong> <a href={seismicNetwork.rpcUrls.default.http[0]} target="_blank" rel="noopener noreferrer">{seismicNetwork.rpcUrls.default.http[0]}</a></p>
                                        <p><strong>Explorer:</strong> <a href={seismicNetwork.blockExplorers.default.url} target="_blank" rel="noopener noreferrer">–û—Ç–∫—Ä—ã—Ç—å explorer</a></p>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="app-footer">
                        <p>¬© 2024 Seismic Game. Powered by Privy React Auth</p>
                    </footer>
                </div>
            );
        }

        // –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
        function App() {
            const [error, setError] = useState(null);

            useEffect(() => {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Privy
                if (!window.PrivyReactAuth) {
                    setError('Privy React Auth SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
                    return;
                }

                console.log('‚úÖ Privy React Auth SDK –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
                console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Seismic Game —Å Privy React Auth...');
            }, []);

            if (error) {
                return (
                    <div className="app-container">
                        <div className="error-message">
                            <h2>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>
                            <p>{error}</p>
                            <button onClick={() => window.location.reload()}>
                                üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <PrivyProvider
                    appId="cmbhhu8sr00mojr0l66siei2z"
                    config={privyConfig}
                >
                    <AppContent />
                </PrivyProvider>
            );
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function initializeApp() {
            console.log('üöÄ –ó–∞–ø—É—Å–∫ Seismic Game...');
            
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<App />);
            
            console.log('‚úÖ Seismic Game —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω —Å Privy React Auth SDK!');
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html> 